<!DOCTYPE html>
<html lang="es">
  <head>
    <title>Weather Page</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style/styles.css') }}" />
    <script src="static/js/script.js" defer></script>
  </head>
  <body>
    <section class="container">

      <h1>Buscar por...</h1>
      
      <div class="info card">

        <select id="menu" onchange="saveElection()">
          <option>  Seleccione  </option>
          <option value="cityInput">Nombre de la ciudad</option>
          <option value="IATA_codeInput">Código IATA</option>
          <option value="flight_numberInput">Número de vuelo</option>
        </select>

        <!-- Formulario para ingresar datos -->
        <form class="input" method="POST" action="/">
          <div id="cityInput" class="content">
          <label for="city"></label>
          <input type="text" id="city" name="city" placeholder="Ej. Ciudad de México" />
          </div>

          <div id="IATA_codeInput" class="content">
          <label for="iata_code"></label>
          <input type="text" id="iata_code" name="iata_code" placeholder="Ej. JFK" />
          </div>

          <div id="flight_numberInput" class="content">
          <label for="flight_number"></label>
          <input type="text" id="flight_number" name="flight_number" placeholder="Ej. AA123" />
          </div>

          <button  type="submit"> <img src="static/svg/search.svg"> </button>
        </form>
      </div>
      
      <!-- Verifica si se ha recibido la información del clima -->
      <div class="cards">
      {% if departure_weather %}
      <div class="card weather-card" id="departure_card">
        <h2 class="city-name">Ciudad de salida: {{ departure_weather['name'] }}</h2>
        <h1 class="temperature">{{ departure_weather['main']['temp'] }}°C</h1>
        <div class="weather-info">
          <img
            class="weather-icon"
            src="static/img/Storm.png"
            alt="Weather Icon"
          />
          <p class="weather-description">{{ departure_weather['weather'][0]['description'] | capitalize }}</p>
        </div>
        <div class="stats">
          <article class="stat">
            <img class="stat-icon" src="{{ url_for('static', filename='svg/humedad.svg') }}" alt="IMG-Humedad" />
            <p class="stat-value">{{ departure_weather['main']['humidity'] }}%</p>
            <p class="stat-label">Humedad</p>
          </article>
          <article class="stat">
            <img class="stat-icon" src="{{ url_for('static', filename='svg/viento.svg') }}" alt="IMG-Viento" />
            <p class="stat-value">{{ departure_weather['wind']['speed'] }} m/s</p>
            <p class="stat-label">Velocidad de viento</p>
          </article>
        </div>
      </div>
      {% endif %}
      {% if arrival_weather %}
      <div class="card weather-card" id="arrival_card">
        <h2 class="city-name">Ciudad de llegada: {{ arrival_weather['name'] }}</h2>
        <h1 class="temperature">{{ arrival_weather['main']['temp'] }}°C</h1>
        <div class="weather-info">
          <img
            class="weather-icon"
            src="https://img.icons8.com/3d-fluency/94/storm.png"
            alt="Weather Icon"
          />
          <p class="weather-description">{{ arrival_weather['weather'][0]['description'] | capitalize }}</p>
        </div>
        <div class="stats">
          <article class="stat">
            <img class="stat-icon" src="{{ url_for('static', filename='svg/humedad.svg') }}" alt="IMG-Humedad" />
            <p class="stat-value">{{ arrival_weather['main']['humidity'] }}%</p>
            <p class="stat-label">Humedad</p>
          </article>
          <article class="stat">
            <img class="stat-icon" src="{{ url_for('static', filename='svg/viento.svg') }}" alt="IMG-Viento" />
            <p class="stat-value">{{ arrival_weather['wind']['speed'] }} m/s</p>
            <p class="stat-label">Velocidad de viento</p>
          </article>
        </div>
      </div>
      {% endif %}
      {% if not departure_weather and not arrival_weather %}
      <div class="card weather-card">
        <h1>Esperando datos... </h1>
        <h2 class="temperature">¿?°C</h2>
        <div class="weather-info">
          <img
            class="weather-icon"
            src="{{ url_for('static', filename='svg/bx-time-five.svg') }}"
            alt="Weather Icon"
          />
          <p class="weather-description"></p>
        </div>
        <div class="stats">
          <article class="stat">
            <img class="stat-icon" src="{{ url_for('static', filename='svg/humedad.svg') }}" alt="IMG-Humedad" />
            <p class="stat-value">¿?%</p>
            <p class="stat-label">Humedad</p>
          </article>
          <article class="stat">
            <img class="stat-icon" src="{{ url_for('static', filename='svg/viento.svg') }}" alt="IMG-Viento" />
            <p class="stat-value">¿? m/s</p>
            <p class="stat-label">
              Velocidad <br />
              de viento
            </p>
          </article>
          <article class="stat">
            <p class="stat-value">¿? m/s</p>
            <p class="stat-label">otra</p>
          </article>
        </div>
      </div>
      {% endif %}
      {% if error %}
        <p class="error">{{ error }}</p>
      {% endif %}
    </section>
  </body>
</html>